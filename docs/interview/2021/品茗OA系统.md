# 品茗 OA 系统

## 登录

是基于 token 登录的，登录接口后端会生成一个 token，和用户信息一起作为键值对存放到 redis 中，并设置 expired 时间。之后将 token 返回前端，前端拿到后存到 cookie 中，之后的请求都在 request header 上携带该 token，后端会在每个登录态接口从 request header 中获取 token 并去 redis 获取用户信息，不存在则返回 401。

登录后会前端把当前用户信息存储到中央状态库中。

## 动态菜单

不同权限用户所见菜单和按钮不同。公司内部有个专门的资源配置中心，可以配置菜单、按钮等这些权限实体，后端基于 RBAC 权限模型查询并返回当前用户的可见菜单和按钮。

## 用户权限

登录后当前用户会有一个权限标识，配合`@umijs/plugin-access`实现基于权限控制的页面内容。

## 接入微前端

公司希望将内部各个前端项目进行模块拆分与合并，要拆分的是一些臃肿的项目，要合并的是零散部署在不同域名下的项目，最终实现统一域名访问，各模块独立开发和部署。

## 总结

还原了几个实现案例：

[OSS 文件存储]()
[非即时评论@人]()
