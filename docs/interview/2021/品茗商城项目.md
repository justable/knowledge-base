# 品茗商城项目

## 概述

公司主要业务是数字建造，该商城性质是 toB 的，出售公司不同部门所研发的软件，比如造价软件，BIM 软件等。该项目原本是个 JSP 开发的老项目，我负责使用 React 重写了这个项目，整个项目结构还是偏简单的。

## 首屏

SSR，资源动态加载

## 商品列表

无限滚动，筛选器

筛选器主要对商品列表进行筛选。我们希望筛选器的模态框能够在点击页面空白处就关闭，通常的方案是模态框放在一层透明的遮罩层上，监听遮罩层点击事件就可以关闭了，但我们希望的是点击空白处能够直接与其他页面元素交互，如果使用透明遮罩层需要先关闭模态框才能与其他页面元素交互。

最终是利用模态框触发按钮的聚焦状态来实现的，当页面当前的聚焦状态不在按钮或模态框上就关闭模态框。

## 商品详情页

商品的图片，介绍信息都是在公司的中后台管理系统配置的，其中商品介绍信息是由运营人员配置富文本的形式最终以 html 的格式存储在数据库的，前端就直接把它填充到页面中，因为都是公司内部人员参与，倒没有 xss 植入的安全隐患。

## 下单页面

主要就是选择购物车的商品，让用户填写一些分步表单，比如选择收货地址，支付方式这些，用户每步表单填完我都会提交到 redux 中，最终下单时再将 redux 中的数据修剪成后端需要的数据格式。在线支付是以支付宝回调页扫码的形式支付的，前端把订单信息以 form 表单的形式提交给后端，后端调用支付宝 API 并重定向到一个支付页面，扫码支付完成后再返回商城页面。

## 活动页面

主要应对 618 和双 11 的促销活动，主要就是其他公司的采购人员访问。

商品是按照公司部门分类的，活动来临之际每个部门都会单独策划自己的促销宣传页面，然后在对应部门商品列表开放活动入口。

## 总结

还原了几个实现案例：

[滚动加载和商品列表筛选]()
[砸金蛋和奖品报幕]()

基于滑动窗口的概念，100 条数据只取 9 条，展示 8 条做出滚动的效果。
