# Base64 原理

> 它是编码方式而不是加密方式。

Base64 取自 ASCII 码的其中 64 位字符，关于 ASCII 码的更多介绍可以参考[这篇文章](./字符编码集.md)。

## base64 的由来

在计算机的不同领域或场合，编码格式是多种多样的，但是 ASCII 码在所有编码中都是兼容的。

我们以 HTTP 协议的传输为例来体会 base64 所扮演的角色！

HTTP 协议是纯文本协议，它要求请求的首行和请求头都必须是 ASCII 编码（有传输二进制数据的 MIME type），我们通过 Wireshark 的抓包也能验证这一点，如下图所示：

![](@images/wireshark.png)

选中的字节数组是`[68,65,56,6c,6c,6f,0a]`, 这里的字节是以十六进制表示的，先转换成十进制，再对应 ASCII 码表就可得到数据就是`['h','e','l','l','o','\n']`。Hello 是英文字符，能顺利的转换成 ASCII 码，但如果想要传递一张 png 图片呢？图片不同于字符串，它是非文本数据，我们无法通过查 ASCII 码表的方式将图片转换成 ASCII 码，那怎么办呢？这时我总会陷入一个理解困境，计算机的一切数据都可以用二进制表示，不是可以将图片的原始二进制数据（即 01 组合）转换成 ASCII 码吗？其中 0 对应的 ASCII 码的十六进制是 30，1 对应的是 31，假如一张图片的原始二进制数据为`1010`，那么在请求报文中就表示为`[31,30,31,30]`，请求到达终端后再解析即可！首先我要表明的是，这种思路是完全可行的，但是这带来的结果是数据膨胀，即使是一张 1kb 的图片，请求报文也需要很长篇幅才能表述它。

因此 base64 出场了，base64 选取了 ASCII 码表中的 64 个字符，一个字符占 6bit，TODO

为什么不是 base16 或者 base32 呢？TODO
